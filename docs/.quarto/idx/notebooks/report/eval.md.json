{"title":"Evaluation","markdown":{"headingText":"Evaluation","containsRefs":false,"markdown":"\nThis section details the performance of our final selected models on the holdout dataset (the 25% of `LC_train` reserved before cross-validation).\n\n## Best Model Configurations\n\nAfter tuning MARS, Random Forest, XGBoost, MLP, and GRU models using 5-fold cross-validation, XGBoost emerged as the top performer for both prediction tasks.\n\n<table width=\"100%\">\n<tr>\n<td width=\"50%\" valign=\"top\" style=\"padding-right: 20px; border-right: 2px solid #ccc;\">\n\n### Duration Model (Best on Holdout)\n\n| Component | Configuration |\n|-----------|--------------|\n| Model | **XGBoost** |\n| CV Method | 5-fold |\n| Trees | `75` |\n| Tree Depth | `21` |\n| Learning Rate | `0.05` |\n| Min Node Size | `15` |\n| Variables Tried (mtry) | `15` |\n| Holdout RMSE | `59.9` |\n| Holdout R² | `0.099` |\n\n</td>\n<td width=\"50%\" valign=\"top\" style=\"padding-left: 20px;\">\n\n### Occupancy Model (Best on Holdout)\n\n| Component | Configuration |\n|-----------|--------------|\n| Model | **XGBoost** |\n| CV Method | 5-fold |\n| Trees | `450` |\n| Tree Depth | `8` |\n| Learning Rate | `0.1` |\n| Min Node Size | `2` |\n| Variables Tried (mtry) | `35` |\n| Holdout RMSE | `1.83` |\n| Holdout R² | `0.911` |\n\n</td>\n</tr>\n</table>\n\nFor predicting visit `Duration`, the optimized **XGBoost model** achieved the lowest Root Mean Squared Error (RMSE) on the holdout set compared to the other algorithms tested. The key hyperparameters identified through cross-validation tuning were 75 trees, a maximum tree depth of 21, a learning rate of 0.05, a minimum node size of 15, and sampling 15 variables at each split.\n\nHowever, the resulting R² value of **0.099** is quite low, indicating that even the best model struggled significantly to explain the variance in individual visit durations. As noted in the presentation, we found that applying a **post-hoc weighted average** (blending the model's prediction with the overall mean training duration) slightly improved practical performance, though the fundamental challenge of predicting this noisy target remains.\n\nThe `Occupancy` prediction task yielded much more successful results. Again, **XGBoost** provided the best performance on the holdout data. The optimal configuration used 450 trees, a maximum depth of 8, a learning rate of 0.1, a minimum node size of 2, and sampled 35 variables per split. This model achieved an RMSE of **1.83 students** and a strong R² value of **0.911**, demonstrating its ability to effectively capture the patterns driving building occupancy based on check-in data.\n\n## Model Diagnostics\n\n*(Note: The diagnostic plots shown here are from the final presentation and reflect the performance of the best XGBoost models on the holdout set.)*\n\n### Duration Model Performance (XGBoost)\n\nThe diagnostic plots for the best duration model (XGBoost) highlight the difficulties encountered. While better than simpler models explored earlier, the R² of ~0.1 signifies substantial unexplained variance.\n\n![Duration Model Diagnostics](../../presentation/images/eval/holdout_diagnostics_duration.png)\n\n- **Predicted vs. Actual**: Shows significant scatter and a tendency for the model to predict within a narrower range than the true values, particularly struggling with very long durations.\n- **Residuals vs. Predicted**: Ideally shows no pattern, but here we see variance increase with predicted value (heteroscedasticity) especially from around 45 to 120 in our predicted values, indicating model misspecification.\n- **Residual Histogram/QQ Plot**: These plots deviate from normality, especially in the tails, reflecting the model's difficulty with the right skewed nature of duration data and extreme values.\n\n> **Summary:** Predicting individual visit duration remains challenging. The XGBoost model, while the best performer among those tested, still only explains about 10% of the variance (R² ≈ 0.1). The diagnostics show limitations in capturing the full range and variability of visit lengths, potentially due to inherent randomness in individual behavior or missing predictive factors (e.g., specific purpose of visit).\n\n### Occupancy Model Performance (XGBoost)\n\nThe **Occupancy model** diagnostics show a much better fit, consistent with the high R² value.\n\n![Occupancy Model Diagnostics](../../presentation/images/eval/holdout_diagnostics_occupancy.png)\n\n- **Predicted vs. Actual**: Shows points clustering much more closely around the ideal 45-degree line, indicating good agreement between predictions and actual occupancy counts. The integer nature of the data is visible.\n- **Residuals vs. Predicted**: While perhaps not perfectly random, the pattern is much less pronounced than for the duration model, suggesting the model captures the primary drivers of occupancy well.\n- **Residual Histogram/QQ Plot**: Appear much closer to a normal distribution compared to the duration residuals, although some significant deviations occur at the extremes (very low and very high occupancy).\n\n> **Summary:** The XGBoost model for occupancy prediction performed remarkably well (R² ≈ 0.91). Diagnostics confirm a strong fit, even for high values. The model effectively learned the relationship between the input features (time, student demographics, academic context, etc.) and the number of students currently in the Learning Commons.\n\n## Distribution Analysis\n\n*(Note: The distribution plots shown here are from the final presentation.)*\n\n### Predicted vs. Actual Distributions\n\nComparing the distributions of predicted versus actual values provides further insight.\n\n![Distribution Comparisons Duration](../../presentation/images/eval/duration_distribution.png)\n\n- **Duration**: The predicted distribution (blue) for the XGBoost duration model is still more concentrated than the actual distribution (red), reflecting the difficulty in predicting the long tail of very long visits (R² ≈ 0.1). While potentially better than simpler models from last semester, it doesn't fully capture the observed spread.\n\n![Distribution Comparisons Occupancy](../../presentation/images/eval/occupancy_distribution.png)\n\n- **Occupancy**: The predicted distribution aligns interestingly with the actual occupancy counts. While the model performs with a high R² (≈ 0.91), the shape and central tendency of the observed data sits some 2 occupants *lower* than the mean and median at a much higher density, $\\sim 2 \\times$. This contrasts to our last semester's prediction curve which centered about 1.5 mean occupants *higher* than the training distribution.\n\n### Comparison of Prediction Methods (Occupancy)\n\n*(Note: The presentation included a plot comparing imputed vs. direct occupancy predictions.)*\n\nThe visualization below compares direct occupancy prediction (blue), using XGBoost, against an indirect method (red), viz. imputing occupancy based on the XGBoost duration predictions. Direct modeling typically yields better results as it avoids propagating errors from an intermediate prediction step. However, based on the plot, one might think that the imputed curve (red) better aligns with the training occupancy distribution. This observation was noted last semester as well.\n\n![Occupancy Comparison Histogram](../../presentation/images/eval/imputed_vs_direct_occupancy.png)\n\n> **Insight**: Directly modeling the target variable of interest (Occupancy) proved much more effective than trying to infer it from predictions of a related but harder-to-predict variable (Duration). Our final XGBoost occupancy model significantly outperformed any imputed approaches considered.\n\n## Technical Challenges and Insights\n\nThe process of developing these models highlighted several important technical aspects. Predicting individual visit `Duration` proved substantially more difficult than forecasting accumulated `Occupancy`, primarily due to the high variability and pronounced right-skewness inherent in the duration data. This characteristic makes the target challenging for standard regression models.\n\nOur exploration showed that for these specific prediction tasks, the XGBoost algorithm ultimately provided superior performance compared to simpler linear models (MARS), standard Random Forests, and the neural network architectures tested. This suggests that the non-linear relationships and feature interactions effectively captured by gradient boosting were crucial for maximizing predictive accuracy.\n\nFinally, the necessity of careful hyperparameter tuning through cross-validation became evident, as the performance of complex models like XGBoost can be quite sensitive to the chosen settings for parameters like tree depth, learning rate, and regularization.","srcMarkdownNoYaml":""},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"markdown"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","toc":true,"toc-depth":3,"number-sections":false,"output-file":"eval.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.6.43","theme":"united"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html","revealjs"]}